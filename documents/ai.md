# AI

## 大概思路

我们选择$\alpha-\beta$剪枝算法作为我们的核心算法.

对于井字棋而言, 一般是min+max两层的深度就够了.
但这是五子棋, 所以我们可能要再多考虑几层(除非评估函数很优秀). 因此我们考虑设置min, max, min, max4层.

## 复杂度计算

一般五子棋棋盘大小为15\*15, 而我们有4层来计算, 这样节点数大约是200^4 = 1.6e9.
同时我们还要计算评估函数的复杂度, 假设其为C, 而C的数量级大约是1e2(和棋盘大小相关).
因此最终执行的次数上限大概是1.6e11次.
但我们使用了$\alpha-\beta$剪枝算法, 我们远远达不到这个上限. 不过考虑到我们给机器的时间是10s, 同时1s大概只能
进行1e9次操作, 所以这个复杂度还是不能接受.

## 对$\alpha-\beta$剪枝算法的进一步优化

考虑到棋盘很大, 而刚开始时其实我们下棋只会局限在一个小范围内, 所以我们做如下优化: 对于当前棋盘, 取能包含所有棋子的
最小矩形, 把这个矩形向上下左右四个方向扩展一个格子成为稍微大一点的矩形, 以这个矩形的范围作为我们下棋位置的集合.

那么, 游戏进行到后面, 这个矩形难免会变得和棋盘一样大, 怎么办? 考虑到当游戏进行到这个程度时, 其实双方下棋已经比较多了,
而下过棋的位置是不需要作为下棋选择去拓展节点的, 所以如果选择的矩形变大, 那么矩形内部的可选择的格子大概率是不多的. 这样我们
保证了选择的数量是远远达不到15*15这个上限的.

## 评估函数

井字棋的评估函数是直接枚举这个局面所能达到的所有获胜局面的数量, 然后双方的获胜数相减得到当前局面的评估分数.
而五子棋棋盘大, 用这个方法是绝对行不通的. 我们要换个思路, 用类似于贪心的想法, 用启发式函数去对当前的局面进行评估.

首先, 如果当前局面已经有结果了, 那么直接返回结果即可(我方赢: inf, 对方赢: -inf)
, 否则我们就这样来评估:

总分数S最开始为0.

首先站在我方的角度来评估, 令分数$S_1$初始为0. 棋盘上每个格子都对它的4个方向(右,右下,左下, 左)的分别进行如下操作:
沿着当前方向看5个格子(包括当前), 如果其中包含对方棋子, 总分数不加; 不包含的话, 计我方的棋子数为a,
我方棋子的连接处数目为b(连接处的意思是, 两个同色棋子挨在一块的中间那条缝), 然后对总分数这样操作:

$$ S1 += a^5 + b^5 $$

这样操作是基于同方向棋子越多越好, 与连接处越多越好的贪心想法去考虑的.
每个棋子的每个方向都要这样操作一遍. 可以发现, 被围起来的棋子或者在边界的棋子对S的贡献会更少, 因为它更可能在操作时碰到
对方棋子或边界, 这样它参与计算的次数会比较少. 这也符合我们的通常的贪心想法.

然后类似的计算处对方的评估分数$S_2$, 令S为:

$$ S = S_1 - S_2 $$

即可.